import{S as x,i as $,s as F,C as S,k as y,a as A,l as v,m as g,h,c as D,n as E,b as M,D as b,E as C,F as H,G as K,g as O,d as I}from"./index.7582b933.js";import{p as N}from"./parse.bee59afc.js";import{j as V,k as j}from"./singletons.32b1a222.js";function B(a,r){const u='a[href], button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])';let i,t;function l(e){e.shiftKey&&e.code==="Tab"&&(e.preventDefault(),t.focus())}function c(e){!e.shiftKey&&e.code==="Tab"&&(e.preventDefault(),i.focus())}const o=e=>{if(r===!1)return;const f=Array.from(a.querySelectorAll(u));f.length&&(i=f[0],t=f[f.length-1],e||i.focus(),i.addEventListener("keydown",l),t.addEventListener("keydown",c))};o(!1);function m(){i&&i.removeEventListener("keydown",l),t&&t.removeEventListener("keydown",c)}const n=(e,f)=>(e.length&&(m(),o(!0)),f),s=new MutationObserver(n);return s.observe(a,{childList:!0,subtree:!0}),{update(e){r=e,e?o(!1):m()},destroy(){m(),s.disconnect()}}}function q(a){let r,u,i,t,l,c,o;const m=a[1].default,n=S(m,a,a[0],null);return{c(){r=y("div"),u=y("div"),i=A(),t=y("span"),n&&n.c(),l=A(),c=y("div"),this.h()},l(s){r=v(s,"DIV",{class:!0});var e=g(r);u=v(e,"DIV",{class:!0}),g(u).forEach(h),i=D(e),t=v(e,"SPAN",{class:!0});var f=g(t);n&&n.l(f),f.forEach(h),l=D(e),c=v(e,"DIV",{class:!0}),g(c).forEach(h),e.forEach(h),this.h()},h(){E(u,"class","flex-grow border-t border-gray-200"),E(t,"class","flex-shrink mx-3 text-gray-200"),E(c,"class","flex-grow border-t border-gray-200"),E(r,"class","relative flex py-3 items-center")},m(s,e){M(s,r,e),b(r,u),b(r,i),b(r,t),n&&n.m(t,null),b(r,l),b(r,c),o=!0},p(s,[e]){n&&n.p&&(!o||e&1)&&C(n,m,s,s[0],o?K(m,s[0],e,null):H(s[0]),null)},i(s){o||(O(n,s),o=!0)},o(s){I(n,s),o=!1},d(s){s&&h(r),n&&n.d(s)}}}function P(a,r,u){let{$$slots:i={},$$scope:t}=r;return a.$$set=l=>{"$$scope"in l&&u(0,t=l.$$scope)},[t,i]}class Q extends x{constructor(r){super(),$(this,r,P,q,F,{})}}const U=V("invalidate_all");function z(a){return j.apply_action(a)}function G(a){const r=JSON.parse(a);return r.data&&(r.data=N(r.data)),r}function T(a){return HTMLElement.prototype.cloneNode.call(a)}function X(a,r=()=>{}){const u=async({action:t,result:l,reset:c})=>{l.type==="success"&&(c!==!1&&HTMLFormElement.prototype.reset.call(a),await U()),(location.origin+location.pathname===t.origin+t.pathname||l.type==="redirect"||l.type==="error")&&z(l)};async function i(t){var _,w,L,k;if(((_=t.submitter)!=null&&_.hasAttribute("formmethod")?t.submitter.formMethod:T(a).method)!=="post")return;t.preventDefault();const c=new URL((w=t.submitter)!=null&&w.hasAttribute("formaction")?t.submitter.formAction:T(a).action),o=new FormData(a),m=(L=t.submitter)==null?void 0:L.getAttribute("name");m&&o.append(m,((k=t.submitter)==null?void 0:k.getAttribute("value"))??"");const n=new AbortController;let s=!1;const f=await r({action:c,cancel:()=>s=!0,controller:n,get data(){return o},formData:o,get form(){return a},formElement:a,submitter:t.submitter})??u;if(s)return;let p;try{const d=await fetch(c,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:o,signal:n.signal});p=G(await d.text()),p.type==="error"&&(p.status=d.status)}catch(d){if((d==null?void 0:d.name)==="AbortError")return;p={type:"error",error:d}}f({action:c,get data(){return o},formData:o,get form(){return a},formElement:a,update:d=>u({action:c,result:p,reset:d==null?void 0:d.reset}),result:p})}return HTMLFormElement.prototype.addEventListener.call(a,"submit",i),{destroy(){HTMLFormElement.prototype.removeEventListener.call(a,"submit",i)}}}export{Q as T,X as e,B as f};
